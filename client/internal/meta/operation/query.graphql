fragment TaskResult on TaskResult {
	queryId
	stageId
	startTime
	endTime
	resultCursor
	resultSchema {
		typedefDefinition
	}
}

fragment StageQuery on StageQuery {
	# @genqlient(pointer: true)
	id
	pipeline
	params
	layout
	input {
		inputName
		inputRole
		datasetId
		datasetPath
		stageId
	}
}

query getDatasetQueryOutput(
	# @genqlient(pointer: true)
	$query: [StageInput!]!,
	$params: QueryParams!)
{
	# @genqlient(flatten: true, pointer: true)
	taskResult: datasetQueryOutput(query: $query, params: $params) {
		...TaskResult
	}
}
